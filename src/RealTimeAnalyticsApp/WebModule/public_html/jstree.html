<!DOCTYPE html>
<html lang="en">
<head>
	<meta charset="UTF-8">
	<title>jstree basic demos</title>
	<style>
	</style>
	<link rel="stylesheet" href="adminLTE/plugins/jstree/themes/default/style.css" />
</head>
<body>


	<h1>Data format demo</h1>
	<button id="evts_button">Refresh</button> <em>either click the button or a node in the tree</em>
	<div id="dashboards-tree"></div>

    <script src="adminLTE/plugins/jQuery/jQuery-2.1.4.min.js" type="text/javascript"></script> <!-- jQuery 2.1.4 -->
		<script src="adminLTE/plugins/jstree/jstree.min.js"></script>
	
	<script>


	
					
		$.ajax({
			url: '/rta/resources/dashboards/list',
			type: 'GET',
			dataType: "json",
			cache: false
		}).then(function(jstreeData) {				
			// data format demo
			$('#dashboards-tree').jstree({
				'core' : {
					'data' : jstreeData
						},
				'contextmenu' : {
					'items' : customMenu
				},
				'plugins' : ['contextmenu', 'types'],
				'types' : {
					createItem : { /* options */ },
					renameItem : { /* options */ },
					deleteItem : { /* options */ }
					// etc...
				}		
			});
		});

					

	function customMenu(node)
	{
		var control;
		var items = {
			createItem: {
				label: "Create",
				action: function (node) {
					if ($('#dashboards-tree').jstree(true).is_parent(node))
						alert("create");
				}
			},
			renameItem: {
				label: "Rename",
				action: function (node) {
				
				}
			},
			deleteItem: {
				label: "Delete",
				action: function (node) {
				
				},
				"separator_after": true
			}
		}



		

    return items;

		
		
	}	
	
	// interaction and events
	$('#evts_button').on("click", function () {
		var instance = $('#dashboards-tree').jstree(true);
		instance.deselect_all();
		instance.select_node(1);
	});
	$('#dashboards-tree')
		.on("changed.jstree", function (e, data) {
			if(data.selected.length) {
				// Check if the selected node has changed
				//alert('The selected node is: ' + data.instance.get_path(data.selected[0], '/'));
				alert('The selected node is: ' + data.instance.get_node(data.selected[0]).id);
			}
		})
		.bind("ready.jstree", function () {
			alert("ready");
			var instance = $('#dashboards-tree').jstree(true);
			instance.deselect_all();
			instance.select_node($("#j1_1"));
		});

		
	</script>
</body>
</html>